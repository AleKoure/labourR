<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Classify occupations — classify_occupation • labourR</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Classify occupations — classify_occupation" />
<meta property="og:description" content="This function takes advantage of the hierarchical structure of the ESCO-ISCO mapping and matches multilingual free-text with the
ESCO occupations vocabulary in order to map semi-structured vacancy data into the official
ESCO-ISCO classification." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">labourR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/labourR_blogpost.html">Introduction to labourR</a>
    </li>
    <li>
      <a href="../articles/occupations_retrieval.html">Occupations Classification</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/AleKoure/labourR/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Classify occupations</h1>
    <small class="dont-index">Source: <a href='https://github.com/AleKoure/labourR/blob/master/R/occupations_classify.R'><code>R/occupations_classify.R</code></a></small>
    <div class="hidden name"><code>classify_occupation.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function takes advantage of the hierarchical structure of the ESCO-ISCO mapping and matches multilingual free-text with the
<a href='https://ec.europa.eu/esco/portal/home'>ESCO</a> occupations vocabulary in order to map semi-structured vacancy data into the official
ESCO-ISCO classification.</p>
    </div>

    <pre class="usage"><span class='fu'>classify_occupation</span>(
  <span class='no'>corpus</span>,
  <span class='kw'>id_col</span> <span class='kw'>=</span> <span class='st'>"id"</span>,
  <span class='kw'>text_col</span> <span class='kw'>=</span> <span class='st'>"text"</span>,
  <span class='kw'>lang</span> <span class='kw'>=</span> <span class='st'>"en"</span>,
  <span class='kw'>num_leaves</span> <span class='kw'>=</span> <span class='fl'>10</span>,
  <span class='kw'>isco_level</span> <span class='kw'>=</span> <span class='fl'>3</span>,
  <span class='kw'>max_dist</span> <span class='kw'>=</span> <span class='fl'>0.1</span>,
  <span class='kw'>string_dist</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>corpus</th>
      <td><p>A data.frame or a data.table that contains the id and the text variables.</p></td>
    </tr>
    <tr>
      <th>id_col</th>
      <td><p>The name of the id variable.</p></td>
    </tr>
    <tr>
      <th>text_col</th>
      <td><p>The name of the text variable.</p></td>
    </tr>
    <tr>
      <th>lang</th>
      <td><p>The language that the text is in.</p></td>
    </tr>
    <tr>
      <th>num_leaves</th>
      <td><p>The number of occupations/neighbors that are kept when matching.</p></td>
    </tr>
    <tr>
      <th>isco_level</th>
      <td><p>The <a href='https://ec.europa.eu/esco/portal/escopedia/Occupation'>ISCO</a> level of the suggested occupations.
Can be either 1, 2, 3, 4 for ISCO occupations, or NULL that returns ESCO occupations.</p></td>
    </tr>
    <tr>
      <th>max_dist</th>
      <td><p>String distance used for fuzzy matching. The <code><a href='https://rdrr.io/pkg/stringdist/man/amatch.html'>amatch</a></code> function from the stringdist package is used.</p></td>
    </tr>
    <tr>
      <th>string_dist</th>
      <td><p>String dissimilarity measurement. Available string distance metrics: <code><a href='https://rdrr.io/pkg/stringdist/man/stringdist-metrics.html'>stringdist-metrics</a></code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Either a data.table with the id, the preferred label and the suggested ESCO occupation URIs (num_leaves predictions for each id),
or a data.table with the id, the preferred label and the suggested ISCO group of the inputted level (one for each id).</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>First, the input text is cleansed and tokenized. The tokens are then matched with the ESCO occupations vocabulary, created from
the preferred and alternative labels of the occupations. They are joined with the <code><a href='tf_idf.html'>tfidf</a></code>
weighted tokens of the ESCO occupations and the sum of the tf-idf score is used to retrieve the suggested ontologies. Technically speaking, the
suggested ESCO occupations are retrieved by solving the optimization problem, $$\arg\max_d\left\{\vec{u}_{binary}\cdot \vec{u}_d\right\}$$
where, \(\vec{u}_{binary}\) stands for the binary representation of a query to the ESCO-vocabulary space,
while, \(\vec{u}_d\) is the ESCO occupation normalized vector generated by the tf-idf numerical statistic.
If an ISCO level is specified, the k-nearest neighbors algorithm is used to determine the suggested occupation, classified by a plurality vote in the corresponding hierarchical level of its neighbors.</p>
<p>Before the suggestions are returned, the preferred label of each suggested occupation is added to the result, using the
<code><a href='occupations_bundle.html'>occupations_bundle</a></code> and <code><a href='isco_occupations_bundle.html'>isco_occupations_bundle</a></code> as look-up tables.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>M.P.J. van der Loo (2014). <a href='https://journal.r-project.org/archive/2014-1/loo.pdf'>The stringdist package for approximate string matching</a>. R Journal 6(1) pp 111-122.</p>
<p>Gweon, H., Schonlau, M., Kaczmirek, L., Blohm, M., &amp; Steiner, S. (2017). <a href='https://doi.org/10.1515/jos-2017-0006'>Three Methods for Occupation Coding Based on Statistical Learning, Journal of Official Statistics</a>, 33(1), 101-122.</p>
<p>Conrad, F. G., Couper, M. P., &amp; Sakshaug, J. W. (2016). <a href='https://doi.org/10.1515/jos-2016-0003'>Classifying Open-Ended Reports: Factors Affecting the Reliability of Occupation Codes, Journal of Official Statistics</a>, 32(1), 75-92.</p>
<p>ESCO Service Platform - The ESCO Data Model <a href='https://ec.europa.eu/esco/portal/document/en/87a9f66a-1830-4c93-94f0-5daa5e00507e'>documentation</a></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>corpus</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(
 <span class='kw'>id</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>3</span>,
 <span class='kw'>text</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(
   <span class='st'>"Junior Architect Engineer"</span>,
   <span class='st'>"Cashier at McDonald's"</span>,
   <span class='st'>"Priest at St. Martin Catholic Church"</span>
 )
)
<span class='fu'>classify_occupation</span>(<span class='kw'>corpus</span> <span class='kw'>=</span> <span class='no'>corpus</span>, <span class='kw'>isco_level</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>lang</span> <span class='kw'>=</span> <span class='st'>"en"</span>, <span class='kw'>num_leaves</span> <span class='kw'>=</span> <span class='fl'>5</span>)</div><div class='output co'>#&gt;    id iscoGroup                                          preferredLabel
#&gt; 1:  1       214 Engineering professionals (excluding electrotechnology)
#&gt; 2:  2       523                              Cashiers and ticket clerks
#&gt; 3:  3       263                      Social and religious professionals</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Alexandros Kouretsis, Andreas Bampouris, Petros Morfiris, Konstantinos Papageorgiou.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


